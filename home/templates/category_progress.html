{% extends "base.html" %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2>Category Spending Progress</h2>
  <form method="get" class="row g-2 align-items-center">
    <div class="col-auto">
      <label for="month" class="col-form-label">Month:</label>
    </div>
    <div class="col-auto">
      <input type="month" id="month" name="month" class="form-control"
             value="{{ selected_month }}">
    </div>
    <div class="col-auto">
      <button type="submit" class="btn btn-primary">Go</button>
    </div>
  </form>
</div>

{% if category_summaries %}
  <div class="row justify-content-center">
    <div class="col-md-4">
      {% for cat in category_summaries %}
        <a href="{% url 'category_expense_list' cat.name %}?month={{ selected_month }}"
           class="text-decoration-none text-reset">
          <div class="mb-3 border rounded p-3 hover-shadow" style="transition: box-shadow 0.2s;">
            <div class="d-flex justify-content-between small mb-2">
              <strong>{{ cat.name }}</strong>
              <span>${{ cat.spent|floatformat:2 }} / ${{ cat.target|floatformat:2 }} ({{ cat.percent_used }}%)</span>
            </div>
            <div class="progress" style="height: 20px;">
              <div class="progress-bar {{ cat.bar_class }}"
                   role="progressbar"
                   style="width: {{ cat.percent_used }}%;"
                   aria-valuenow="{{ cat.percent_used }}"
                   aria-valuemin="0"
                   aria-valuemax="100">
                {{ cat.percent_used }}%
              </div>
            </div>
          </div>
        </a>
      {% endfor %}
    </div>
  </div>
{% else %}
  <p>No data available for this month.</p>
{% endif %}
{% endblock %}
